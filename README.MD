# Заметочник на react.js и flask

Проба пера в react, писалось в качестве продукта дипломной работы моего знакомого.

## Запуск

> Установите зависимости

    pip3 install flask

> Запустите сервер

    python3 main.py

или

    gunicorn -w 4 main:app

## Внесение изменений

Для изменения хранимых пользователем данных сервер можно запустить в интерактивном режиме, в нём возможно вызывать методы API как функции.

    python3 -i main.py interact

Пример:

    session = create_session(<ID ПОЛЬЗОВАТЕЛЯ>)
    add_note(session)
    edit_note(session, 1, "Первая заметка", "Текст первой заметки")

Для изменения кода веб-интерфейса вам потребуется установленная [Node.js](https://nodejs.org/) на компьютере.  
Перейдите в папку __web__ и выполните:

    npm i

Для сборки обновленного бандла и его размещения в папке с сервером выполните в зависимости от используемой системы:

    npm run-script build

или

    npm run-script build-windows

## Эксплуатация

```
Первый вход:
    На форме авторизации:
        1. Перейдите по ссылке "Создать аккаунт" внизу формы авторизации
    На форме создания аккаунта:
        1. Придумайте пароль и логин, введите их в соответствующие поля
        2. Нажмите кнопку "Создать аккаунт"

Повторная авторизация:
    На форме авторизации:
        1. Введите ваш логин или email и пароль в соответствующие поля
        2. Нажмите кнопку "Вход"

Работа с заметками:
    - Создание заметки:
        Для создания новой заметки нажмите кнопку "+" синего цвета, которая находится в заголовке страницы. В списке заметок появится новая карточка с пустой заметкой.
    - Открытие редактора заметок:
        Выберите заметку для редактирования и кликните в пределах её карточки. В зависимости от ширины экрана откроется редактор заметок либо на весь экран (w<576px), либо во всплывающем окне.
    - Удаление заметки:
        Выберите заметку для удаления и кликните по кнопке "–" красного цвета, которая находится в заголовке карточки. Карточка с заметкой пропадет из списка заметок.
    - Использование редактора заметок:
        * Описание редактора:
            Окно редактора ориентировано вертикально, представлено тремя элементами:
                1. Поле ввода заголовка заметки (макс: 1 строка)
                2. Поле ввода текста заметки (макс: ∞ строк)
                3. Кнопка закрыть, отправляющая изменения на сервер
        * Изменение заметки:
            Измените содержимое полей 1. и 2.
            При изменении текста в полях, спустя две секунды после набора последнего символа сработает автосохранение. Это позволит не потерять текст заметки в случае разрыва интернет-соединения, если кнопка закрыть так и не была нажата.
        * Закрытие редактора:
            В зависимости от ширины экрана доступны два варианта:
                1. w < 576px:
                    Нажмите кнопку закрыть, находящуюся внизу экрана.
                2. w > 576px:
                    Нажмите за пределами редактора на затемнённый фон
                    ИЛИ
                    Нажмите кнопку закрыть, находящуюся внизу экрана.

Работа на нескольких устройствах:
    При входе, а так же в фоне каждые 10 секунд происходит синхронизация заметок с сервером.
    Если дата последнего внесенного изменения отличается на клиенте и на сервере, произойдет синхронизация заметок и перерисовка списка заметок и редактора заметок в соответствии с обновленным содержимым.

Редактирование профиля:
    1. В заголовке страницы нажмите на свой логин для открытия выпадающего меню
    2. Перейдите по ссылке "Редактировать"
    В открывшейся форме можно:
    - Задать email, для сброса забытого пароля
    - Изменить логин
    - Изменить пароль:
        Введите старый пароль
        Введите новый пароль
        Повторите ввод нового пароля
    Логин и email должны быть уникальными среди всех зарегистрированных пользователей! 
    - Удалить аккаунт навсегда:
        Подтвердите или отмените действие в открывшемся модальном окне.

Выход из системы:
    1. В заголовке страницы нажмите на свой логин для открытия выпадающего меню
    2. Перейдите по ссылке "Выход"

Сброс пароля:
    Возможен только в случае, если в профиле был задан email!
    На форме авторизации:
        1. Перейдите по ссылке "Забыли пароль?" над полем ввода пароля
    На форме сброса пароля:
        1. Введите email
        2. Введите пароль
        3. Подтвердите пароль
        4. Нажмите кнопку "Сбросить пароль"
```
